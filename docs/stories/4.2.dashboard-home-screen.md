# Story 4.2: Dashboard Home Screen

## Status
Draft

## Story
**As a** user,
**I want** a dashboard home screen showing scrape status and latest analysis,
**so that** I can quickly see current competitive intelligence.

## Acceptance Criteria

1. Dashboard displays latest scrape timestamp and data freshness indicator
2. Status indicators show: green (data <24 hours), yellow (24-48 hours), red (>48 hours)
3. Latest full analysis results displayed prominently
4. Quick-action buttons visible: "Run Full Analysis", "Custom Comparison", "Trigger Scrape"
5. Loading states for async operations
6. Responsive layout using Tailwind CSS
7. Lucide React icons for visual clarity

## Tasks / Subtasks

- [ ] Create dashboard home page (AC: 1, 2, 3, 4)
  - [ ] Create `src/app/dashboard/page.tsx`
  - [ ] Set up page structure
  - [ ] Add protected route check
- [ ] Implement scrape status display (AC: 1, 2)
  - [ ] Fetch latest scrape timestamp from database
  - [ ] Calculate data freshness (hours since scrape)
  - [ ] Display timestamp
  - [ ] Add color-coded status indicators (green/yellow/red)
- [ ] Implement analysis display (AC: 3)
  - [ ] Fetch latest full analysis from database
  - [ ] Display analysis results prominently
  - [ ] Format analysis data for display
- [ ] Add quick-action buttons (AC: 4)
  - [ ] Add "Run Full Analysis" button
  - [ ] Add "Custom Comparison" button
  - [ ] Add "Trigger Scrape" button
  - [ ] Link buttons to appropriate actions
- [ ] Implement loading states (AC: 5)
  - [ ] Show loading indicator during async operations
  - [ ] Handle loading for analysis fetch
  - [ ] Handle loading for button actions
- [ ] Style with Tailwind CSS (AC: 6)
  - [ ] Create responsive layout
  - [ ] Use Tailwind utility classes
  - [ ] Ensure desktop-first design
- [ ] Add Lucide icons (AC: 7)
  - [ ] Install lucide-react (from Story 1.1)
  - [ ] Add appropriate icons to UI elements
  - [ ] Ensure visual clarity

## Dev Notes

### Source Tree
- Dashboard page: `src/app/dashboard/page.tsx`
- Dashboard components: `src/components/dashboard/` (to be created)
- Database queries: `src/lib/db/queries.ts` (to be created)

### Technical Stack
- Next.js App Router
- Tailwind CSS for styling
- Lucide React for icons
- Server Components for data fetching

### Testing
- Test file location: `tests/integration/dashboard/home.test.ts` (to be created)
- Test framework: Jest + React Testing Library
- Test data fetching, status indicators, button actions

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-XX | 1.0 | Story extracted from PRD | Architect |

## Dev Agent Record

### Agent Model Used
_To be populated by Dev Agent_

### Debug Log References
_To be populated by Dev Agent_

### Completion Notes List
_To be populated by Dev Agent_

### File List
_To be populated by Dev Agent_

## QA Results
_To be populated by QA Agent_

